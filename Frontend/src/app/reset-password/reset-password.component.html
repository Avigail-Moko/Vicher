<div class="reset-container">
  <h2 class="mt-2">Reset Password</h2>
  <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="pt-3">
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>New Password</mat-label>
      <input
        matInput
        [type]="hideNewPassword ? 'password' : 'text'"
        formControlName="newPassword"
        required
      />
      <button
        mat-icon-button
        matSuffix
        type="button"
        (click)="hideNewPassword = !hideNewPassword"
        [attr.aria-label]="'Toggle new password visibility'"
        [attr.aria-pressed]="!hideNewPassword"
      >
        <mat-icon>{{
          hideNewPassword ? "visibility_off" : "visibility"
        }}</mat-icon>
      </button>
      <mat-error *ngIf="resetForm.get('newPassword')?.hasError('required')">
        Password is required
      </mat-error>
      <mat-error *ngIf="resetForm.get('newPassword')?.hasError('minlength')">
        Password must be at least 6 characters
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="w-full mb-0">
      <mat-label>Confirm Password</mat-label>
      <input
        matInput
        [type]="hideConfirmPassword ? 'password' : 'text'"
        formControlName="confirmPassword"
        required
      />
      <button
        mat-icon-button
        matSuffix
        type="button"
        (click)="hideConfirmPassword = !hideConfirmPassword"
        [attr.aria-label]="'Toggle confirm password visibility'"
        [attr.aria-pressed]="!hideConfirmPassword"
      >
        <mat-icon>{{
          hideConfirmPassword ? "visibility_off" : "visibility"
        }}</mat-icon>
      </button>
      <mat-error *ngIf="resetForm.get('confirmPassword')?.hasError('required')">
        Confirm password is required
      </mat-error>
    </mat-form-field>

    <div class="text-green-500" *ngIf="successMessage">
      {{ successMessage }}
    </div>
    <div class="text-red-500" *ngIf="errorMessage">{{ errorMessage }}</div>

    <button
      mat-flat-button
      color="primary"
      type="submit"
    [disabled]="resetForm.disabled || loading"
      class="mt-4"
    >
      {{ loading ? "Updating..." : "Update Password" }}
    </button>
  </form>
</div>
